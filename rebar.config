{erl_opts, [debug_info, warn_unused_vars, warn_export_all]}.

{deps, []}.

{port_env, [{"CMAKE_BUILD_PARALLEL_LEVEL", "4"}]}.

{pre_hooks, [{compile, "sh c_src/build.sh"}]}.

{shell, [{apps, [lexbor_erl]}]}.

{profiles, [{test, [{erl_opts, [nowarn_export_all]}]}]}.

{plugins, [rebar3_format, rebar3_hex, rebar3_ex_doc]}.

%% ExDoc configuration
{ex_doc,
 [{source_url, <<"https://github.com/f34nk/lexbor_erl">>},
  {extras, [<<"README.md">>, <<"CHANGELOG.md">>, <<"LICENSE">>]},
  {main, <<"README.md">>},
  {homepage_url, <<"https://github.com/f34nk/lexbor_erl">>},
  {api_reference, true}]}.

%% Hex.pm publishing configuration
{hex,
 [%% Documentation provider
  {doc, #{provider => ex_doc}},
  %% Files/directories to explicitly exclude
  {exclude_files,
   ["_build",
    "build",
    ".git",
    ".github",
    "test",
    "examples",
    "doc",
    "*.beam",
    "*.o",
    "*.so",
    "*.dylib",
    ".DS_Store",
    "erl_crash.dump",
    "rebar3.crashdump"]},
  %% Prevent accidental publication from wrong branch
  {publish_branch, "main"}]}.
